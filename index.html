<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sumo Matchups</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      background-color: #f2f2f2;
    }

    h1 {
      text-align: center;
    }

    .matchup {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: white;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .rikishi {
      width: 40%;
      text-align: center;
    }

    .vs {
      width: 20%;
      text-align: center;
    }

    .rikishi a {
      color: #333;
      text-decoration: none;
      font-weight: bold;
    }

    .rikishi a:hover {
      text-decoration: underline;
    }

    .radio-group {
      margin-top: 8px;
    }

    .radio-group label {
      margin: 0 10px;
    }
  </style>
</head>
<body>

  <h1>Today's Sumo Matchups - <span id="japan-date"></span></h1>
  <div id="matchups"></div>

  <script>
    async function loadData() {
      try {
        const [matchesRes, rikishiRes] = await Promise.all([
          fetch("matches.json"),
          fetch("rikishi.json")
        ]);

        const matches = await matchesRes.json();
        const rikishiList = await rikishiRes.json();

        const rikishiMap = {};
        rikishiList.forEach(r => {
          if (r.id) {
            rikishiMap[r.id.toLowerCase()] = r;
          }
        });

        const container = document.getElementById("matchups");
        matches.forEach((match, index) => {
          const east = rikishiMap[match.east.toLowerCase()];
          const west = rikishiMap[match.west.toLowerCase()];

          const matchupDiv = document.createElement("div");
          matchupDiv.className = "matchup";

          const matchId = `match_${index}`;

          matchupDiv.innerHTML = `
            <div class="rikishi">
              ${east ? `<a href="${east.url}" target="_blank">${east.shikona}</a>` : match.east}
              <div class="radio-group">
                <label>
                  <input type="radio" name="${matchId}" value="${match.east}">
                  Win
                </label>
              </div>
            </div>

            <div class="vs">vs</div>

            <div class="rikishi">
              ${west ? `<a href="${west.url}" target="_blank">${west.shikona}</a>` : match.west}
              <div class="radio-group">
                <label>
                  <input type="radio" name="${matchId}" value="${match.west}">
                  Win
                </label>
              </div>
            </div>
          `;

          container.appendChild(matchupDiv);
        });

      } catch (err) {
        console.error("Error loading data:", err);
        document.getElementById("matchups").innerText = "Failed to load matchups.";
      }
    }

    loadData();
  </script>
  <script>
  function getJapanDate() {
    const now = new Date();
    const japanOffset = 9 * 60; // JST is UTC+9 in minutes
    const localOffset = now.getTimezoneOffset(); // in minutes
    const japanTime = new Date(now.getTime() + (japanOffset + localOffset) * 60000);
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    return japanTime.toLocaleDateString('en-US', options);
  }

  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("japan-date").textContent = getJapanDate();
  });
  </script>
<script src="buildMatchups.js"></script>
<script src="submitHandler.js"></script>
</body>
</html>


